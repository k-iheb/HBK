<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hassen Ben Khedher - Gestion Patients et RDV</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="styles.css">
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
</head>
<body>
  <div class="app-container">
    <!-- Bouton hamburger pour mobile -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle">
      <i class="fas fa-bars"></i>
    </button>
    
    <!-- Sidebar / Menu latéral -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <img src="logo.png" alt="Logo" class="logo">
        <h1>Dr. Hassen Ben Khedher</h1>
      </div>
      <nav class="sidebar-nav">
        <button id="btn-dashboard" class="nav-btn active"><i class="fas fa-home"></i> Dashboard</button>
        <button id="btn-patients" class="nav-btn"><i class="fas fa-user"></i> Patients</button>
        <button id="btn-rdv" class="nav-btn"><i class="fas fa-calendar-alt"></i> Rendez-vous</button>
      </nav>
    </aside>

    <!-- Contenu principal -->
    <main class="main-content">
      <!-- Section Dashboard -->
      <section id="dashboard-section" class="content-section active">
        <div class="dashboard-header">
          <h2>Dashboard</h2>
          <div class="date-display" id="current-date"></div>
        </div>

        <div class="dashboard-stats">
          <div class="stat-card">
            <i class="fas fa-users"></i>
            <div class="stat-info">
              <h3>Total Patients</h3>
              <p id="total-patients">0</p>
            </div>
          </div>
          <div class="stat-card">
            <i class="fas fa-calendar-check"></i>
            <div class="stat-info">
              <h3>RDV Aujourd'hui</h3>
              <p id="rdv-today">0</p>
            </div>
          </div>
          <div class="stat-card">
            <i class="fas fa-home"></i>
            <div class="stat-info">
              <h3>RDV à Domicile</h3>
              <p id="rdv-domicile">0</p>
            </div>
          </div>
        </div>

        <div class="dashboard-actions">
          <button id="btn-add-patient" class="action-btn"><i class="fas fa-user-plus"></i> Nouveau Patient</button>
          <button id="btn-add-rdv" class="action-btn"><i class="fas fa-calendar-plus"></i> Nouveau RDV</button>
        </div>

        <div class="dashboard-rdv-today">
          <h3>Rendez-vous d'aujourd'hui</h3>
          <div id="today-rdv-list" class="card-list"></div>
        </div>
      </section>

      <!-- Section Patients -->
      <section id="patients-section" class="content-section">
        <div class="section-header">
          <h2>Gestion des Patients</h2>
          <button id="show-add-patient-form" class="btn-primary"><i class="fas fa-plus"></i> Ajouter un Patient</button>
        </div>

        <!-- Formulaire pour ajouter un patient (caché par défaut) -->
        <div id="patient-form-container" class="form-container hidden">
          <form id="form-patient" class="modal-form">
            <div class="form-header">
              <h3>Nouveau Patient</h3>
              <button type="button" id="close-patient-form" class="btn-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <label for="nom">Nom</label>
                <input type="text" id="nom" placeholder="Nom" required>
              </div>
              <div class="form-group">
                <label for="prenom">Prénom</label>
                <input type="text" id="prenom" placeholder="Prénom" required>
              </div>
              <div class="form-group">
                <label for="telephone">Téléphone</label>
                <input type="tel" id="telephone" placeholder="Téléphone">
              </div>
              <div class="form-group">
                <label for="adresse">Adresse</label>
                <input type="text" id="adresse" placeholder="Adresse">
              </div>
              <div class="form-group">
                <label for="pathologie">Pathologie</label>
                <input type="text" id="pathologie" placeholder="Pathologie">
              </div>
              <div class="form-group">
                <label for="notes">Notes</label>
                <textarea id="notes" placeholder="Notes sur le cas du patient" rows="4"></textarea>
              </div>
              <button type="submit" class="btn-submit">Ajouter</button>
            </div>
          </form>
        </div>

        <!-- Liste des patients -->
        <div class="patients-list-container">
          <div class="search-bar">
            <input type="text" id="search-patient" placeholder="Rechercher un patient...">
            <i class="fas fa-search"></i>
          </div>
          <div id="liste-patients" class="card-list"></div>
          
          <!-- Modal pour l'historique des rendez-vous d'un patient -->
          <div id="historique-rdv-container" class="form-container hidden">
            <div class="modal-form">
              <div class="form-header">
                <h3>Historique des rendez-vous</h3>
                <button type="button" id="close-historique-rdv" class="btn-close"><i class="fas fa-times"></i></button>
              </div>
              <div class="form-body">
                <h4 id="historique-patient-name">Patient</h4>
                <div class="filter-bar">
                  <select id="filter-historique-rdv">
                    <option value="all">Tous les RDV</option>
                    <option value="upcoming">À venir</option>
                    <option value="past">Passés</option>
                  </select>
                </div>
                <div id="historique-rdv-list" class="card-list"></div>
              </div>
            </div>
          </div>
          
          <!-- Modal pour modifier un patient -->
          <div id="edit-patient-container" class="form-container hidden">
            <form id="form-edit-patient" class="modal-form">
              <div class="form-header">
                <h3>Modifier Patient</h3>
                <button type="button" id="close-edit-patient" class="btn-close"><i class="fas fa-times"></i></button>
              </div>
              <div class="form-body">
                <input type="hidden" id="edit-patient-id">
                <div class="form-group">
                  <label for="edit-nom">Nom</label>
                  <input type="text" id="edit-nom" placeholder="Nom" required>
                </div>
                <div class="form-group">
                  <label for="edit-prenom">Prénom</label>
                  <input type="text" id="edit-prenom" placeholder="Prénom" required>
                </div>
                <div class="form-group">
                  <label for="edit-telephone">Téléphone</label>
                  <input type="tel" id="edit-telephone" placeholder="Téléphone">
                </div>
                <div class="form-group">
                  <label for="edit-adresse">Adresse</label>
                  <input type="text" id="edit-adresse" placeholder="Adresse">
                </div>
                <div class="form-group">
                  <label for="edit-pathologie">Pathologie</label>
                  <input type="text" id="edit-pathologie" placeholder="Pathologie">
                </div>
                <div class="form-group">
                  <label for="edit-notes">Notes</label>
                  <textarea id="edit-notes" placeholder="Notes sur le cas du patient" rows="4"></textarea>
                </div>
                <button type="submit" class="btn-submit">Mettre à jour</button>
              </div>
            </form>
          </div>
        </div>
      </section>

      <!-- Section Rendez-vous -->
      <section id="rdv-section" class="content-section">
        <div class="section-header">
          <h2>Gestion des Rendez-vous</h2>
          <button id="show-add-rdv-form" class="btn-primary"><i class="fas fa-plus"></i> Ajouter un RDV</button>
        </div>

        <!-- Formulaire pour ajouter un rendez-vous (caché par défaut) -->
        <div id="rdv-form-container" class="form-container hidden">
          <form id="form-rdv" class="modal-form">
            <div class="form-header">
              <h3>Nouveau Rendez-vous</h3>
              <button type="button" id="close-rdv-form" class="btn-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="form-body">
              <div class="form-group">
                <label for="patient-select">Patient</label>
                <select id="patient-select" required>
                  <option value="">Sélectionner un patient</option>
                </select>
              </div>
              <div class="form-group">
                <label for="date-heure">Date et Heure</label>
                <input type="datetime-local" id="date-heure" required>
              </div>
              <div class="form-group">
                <label for="type">Type de RDV</label>
                <select id="type" required>
                  <option value="">Sélectionner un type</option>
                  <option value="cabinet">Cabinet</option>
                  <option value="domicile">Domicile</option>
                </select>
              </div>
              <button type="submit" class="btn-submit">Planifier</button>
            </div>
          </form>
        </div>

        <!-- Liste des rendez-vous -->
        <div class="rdv-list-container">
          <div class="filter-bar">
            <select id="filter-rdv">
              <option value="all">Tous les RDV</option>
              <option value="today">Aujourd'hui</option>
              <option value="upcoming">À venir</option>
              <option value="past">Passés</option>
            </select>
          </div>
          <div id="liste-rdv" class="card-list"></div>
          
          <!-- Modal pour modifier un rendez-vous -->
          <div id="edit-rdv-container" class="form-container hidden">
            <form id="form-edit-rdv" class="modal-form">
              <div class="form-header">
                <h3>Modifier Rendez-vous</h3>
                <button type="button" id="close-edit-rdv" class="btn-close"><i class="fas fa-times"></i></button>
              </div>
              <div class="form-body">
                <input type="hidden" id="edit-rdv-id">
                <div class="form-group">
                  <label for="edit-patient-select">Patient</label>
                  <select id="edit-patient-select" required>
                    <option value="">Sélectionner un patient</option>
                  </select>
                </div>
                <div class="form-group">
                  <label for="edit-date-heure">Date et Heure</label>
                  <input type="datetime-local" id="edit-date-heure" required>
                </div>
                <div class="form-group">
                  <label for="edit-type">Type de RDV</label>
                  <select id="edit-type" required>
                    <option value="">Sélectionner un type</option>
                    <option value="cabinet">Cabinet</option>
                    <option value="domicile">Domicile</option>
                  </select>
                </div>
                <button type="submit" class="btn-submit">Mettre à jour</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script src="config.js"></script>
  <script src="script.js"></script>
</body>
</html>
